"use strict";const inputName=document.querySelector(".search__name"),searchButton=document.querySelector(".search__button"),list=document.querySelector(".list");let arrayFavourites=[];const keyLocalStorage="Favourite TV Shows";function searchShow(){let e=giveURL();fetch(e).then(function(e){return e.json()}).then(function(e){paintData(e)})}function giveURL(){return`https://api.tvmaze.com/search/shows?q=${inputName.value}`}function paintData(e){let t=[],a=[],r="";for(let o=0;o<e.length;o++){t.push(e[o].show.name),e[o].show.image?a.push(e[o].show.image.medium):a.push("https://via.placeholder.com/210x295/cccccc/666666/?text=TV"),r+=`\n        <li class="list__element list__element${o} ${isContentAddedToLocalStorage(o,e)}">\n            <img src="${a[o]}" alt="${e[o].show.name}" class="elemet__image">\n            <p class="element__name">${e[o].show.name}</p>\n        </li>`}list.innerHTML=r,addListeners()}function isContentAddedToLocalStorage(e,t){let a="";if(localStorage.getItem(keyLocalStorage)){let r=JSON.parse(localStorage.getItem(keyLocalStorage));arrayFavourites=r,a="";for(let o=0;o<r.length;o++)r[o].includes(t[e].show.name)&&(a="list__element--favourite")}else a="";return a}function addListeners(){let e=document.querySelectorAll(".list__element");for(let t=0;t<e.length;t++)e[t].addEventListener("click",markFavourite)}function markFavourite(e){let t,a,r=e.currentTarget;if(a=r.classList.toggle("list__element--favourite"),t=[r.children[0].src,r.children[1].innerHTML],a)arrayFavourites.push(t);else for(let e=0;e<arrayFavourites.length;e++)if(arrayFavourites[e].includes(t[1])){let t=e;arrayFavourites.splice(t,1)}addToLocalStorage(arrayFavourites)}function addToLocalStorage(e){localStorage.setItem(keyLocalStorage,JSON.stringify(arrayFavourites))}searchButton.addEventListener("click",searchShow);